/*! For license information please see protected-demo.js.LICENSE.txt */
(()=>{"use strict";var e={206:e=>{e.exports=ReactDOM},338:(e,t,r)=>{var n=r(206);t.H=n.createRoot,n.hydrateRoot}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,r),a.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);const n=React;var o=r.n(n),a=r(338);function c(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function a(r,n,o,a){var c=n&&n.prototype instanceof u?n:u,s=Object.create(c.prototype);return i(s,"_invoke",function(r,n,o){var a,c,i,u=0,s=o||[],m=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return a=t,c=0,i=e,d.n=r,l}};function p(r,n){for(c=r,i=n,t=0;!m&&u&&!o&&t<s.length;t++){var o,a=s[t],p=d.p,f=a[2];r>3?(o=f===n)&&(i=a[(c=a[4])?5:(c=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=r<2&&p<a[1])?(c=0,d.v=n,d.n=a[1]):p<f&&(o=r<3||a[0]>n||n>f)&&(a[4]=r,a[5]=n,d.n=f,c=0))}if(o||r>1)return l;throw m=!0,n}return function(o,s,f){if(u>1)throw TypeError("Generator is already running");for(m&&1===s&&p(s,f),c=s,i=f;(t=c<2?e:i)||!m;){a||(c?c<3?(c>1&&(d.n=-1),p(c,i)):d.n=i:d.v=i);try{if(u=2,a){if(c||(o="next"),t=a[o]){if(!(t=t.call(a,i)))throw TypeError("iterator result is not an object");if(!t.done)return t;i=t.value,c<2&&(c=0)}else 1===c&&(t=a.return)&&t.call(a),c<2&&(i=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=e}else if((t=(m=d.n<0)?i:r.call(n,d))!==l)break}catch(t){a=e,c=1,i=t}finally{u=1}}return{value:t,done:m}}}(r,o,a),!0),s}var l={};function u(){}function s(){}function m(){}t=Object.getPrototypeOf;var d=[][n]?t(t([][n]())):(i(t={},n,function(){return this}),t),p=m.prototype=u.prototype=Object.create(d);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,i(e,o,"GeneratorFunction")),e.prototype=Object.create(p),e}return s.prototype=m,i(p,"constructor",m),i(m,"constructor",s),s.displayName="GeneratorFunction",i(m,o,"GeneratorFunction"),i(p),i(p,o,"Generator"),i(p,n,function(){return this}),i(p,"toString",function(){return"[object Generator]"}),(c=function(){return{w:a,m:f}})()}function i(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}i=function(e,t,r,n){function a(t,r){i(e,t,function(e){return this._invoke(t,r,e)})}t?o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(a("next",0),a("throw",1),a("return",2))},i(e,t,r,n)}function l(e,t,r,n,o,a,c){try{var i=e[a](c),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(n,o)}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,c,i=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(i.push(n.value),i.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var m=o().memo(function(e){var t=e.requiredRole,r=void 0===t?"subscriber":t,a=e.fallbackContent,i=void 0===a?null:a,s=e.loginPrompt,m=void 0===s?"Please log in to use this feature":s,p=e.upgradePrompt,f=void 0===p?"Upgrade to Premium for access":p,v=e.children,b=u((0,n.useState)(null),2),g=b[0],y=b[1],h=u((0,n.useState)(!0),2),w=h[0],E=h[1];(0,n.useEffect)(function(){x();var e=function(e){var t=e.detail.user;y(t)},t=function(){y(null)};return window.addEventListener("rwp-cct-auth-success",e),window.addEventListener("rwp-cct-auth-logout",t),function(){window.removeEventListener("rwp-cct-auth-success",e),window.removeEventListener("rwp-cct-auth-logout",t)}},[]);var x=function(){var e,t=(e=c().m(function e(){var t,r,n,o,a;return c().w(function(e){for(;;)switch(e.p=e.n){case 0:if(E(!0),e.p=1,!(t=localStorage.getItem("rwp_cct_token"))){e.n=6;break}return e.n=2,fetch("".concat(window.rwpCctGlobalAuth.apiUrl,"auth/verify"),{method:"GET",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}});case 2:if(!(r=e.v).ok){e.n=4;break}return e.n=3,r.json();case 3:n=e.v,y(n.user),e.n=5;break;case 4:localStorage.removeItem("rwp_cct_token"),y(null);case 5:e.n=7;break;case 6:null!==(o=window.rwpCctGlobalAuth)&&void 0!==o&&null!==(o=o.currentUser)&&void 0!==o&&o.isLoggedIn?y(window.rwpCctGlobalAuth.currentUser):y(null);case 7:e.n=9;break;case 8:e.p=8,a=e.v,console.error("Auth check failed:",a),y(null);case 9:return e.p=9,E(!1),e.f(9);case 10:return e.a(2)}},e,null,[[1,8,9,10]])}),function(){var t=this,r=arguments;return new Promise(function(n,o){var a=e.apply(t,r);function c(e){l(a,n,o,c,i,"next",e)}function i(e){l(a,n,o,c,i,"throw",e)}c(void 0)})});return function(){return t.apply(this,arguments)}}(),N=!!g,P=(null==g?void 0:g.role)||"guest";return w?o().createElement("div",{className:"flex items-center justify-center p-4"},o().createElement("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"})):N?d(P,r)?v:o().createElement("div",{className:"text-center p-4 border border-gray-600 rounded bg-gray-800/50"},o().createElement("p",{className:"text-gray-300 text-sm mb-3"},f),o().createElement("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded text-sm transition-colors",onClick:function(){console.log("Upgrade flow not implemented yet")}},"Upgrade to Premium")):i||o().createElement("div",{className:"text-center p-4 border border-gray-600 rounded bg-gray-800/50"},o().createElement("p",{className:"text-gray-300 text-sm mb-3"},m),o().createElement("button",{onClick:function(){return function(){var e=new CustomEvent("rwp-cct-open-auth-modal",{detail:{formType:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"login"}});window.dispatchEvent(e)}("login")},className:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded text-sm transition-colors"},"Log In / Register"))}),d=function(e,t){var r={guest:0,subscriber:1,rwp_cct_premium:2,contributor:3,author:3,editor:4,administrator:5};return r[e]>=r[t]};m.displayName="AuthGate";const p=m;function f(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function a(r,n,o,a){var l=n&&n.prototype instanceof i?n:i,u=Object.create(l.prototype);return v(u,"_invoke",function(r,n,o){var a,i,l,u=0,s=o||[],m=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return a=t,i=0,l=e,d.n=r,c}};function p(r,n){for(i=r,l=n,t=0;!m&&u&&!o&&t<s.length;t++){var o,a=s[t],p=d.p,f=a[2];r>3?(o=f===n)&&(l=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=r<2&&p<a[1])?(i=0,d.v=n,d.n=a[1]):p<f&&(o=r<3||a[0]>n||n>f)&&(a[4]=r,a[5]=n,d.n=f,i=0))}if(o||r>1)return c;throw m=!0,n}return function(o,s,f){if(u>1)throw TypeError("Generator is already running");for(m&&1===s&&p(s,f),i=s,l=f;(t=i<2?e:l)||!m;){a||(i?i<3?(i>1&&(d.n=-1),p(i,l)):d.n=l:d.v=l);try{if(u=2,a){if(i||(o="next"),t=a[o]){if(!(t=t.call(a,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,i<2&&(i=0)}else 1===i&&(t=a.return)&&t.call(a),i<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),i=1);a=e}else if((t=(m=d.n<0)?l:r.call(n,d))!==c)break}catch(t){a=e,i=1,l=t}finally{u=1}}return{value:t,done:m}}}(r,o,a),!0),u}var c={};function i(){}function l(){}function u(){}t=Object.getPrototypeOf;var s=[][n]?t(t([][n]())):(v(t={},n,function(){return this}),t),m=u.prototype=i.prototype=Object.create(s);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,v(e,o,"GeneratorFunction")),e.prototype=Object.create(m),e}return l.prototype=u,v(m,"constructor",u),v(u,"constructor",l),l.displayName="GeneratorFunction",v(u,o,"GeneratorFunction"),v(m),v(m,o,"Generator"),v(m,n,function(){return this}),v(m,"toString",function(){return"[object Generator]"}),(f=function(){return{w:a,m:d}})()}function v(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}v=function(e,t,r,n){function a(t,r){v(e,t,function(e){return this._invoke(t,r,e)})}t?o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(a("next",0),a("throw",1),a("return",2))},v(e,t,r,n)}function b(e,t,r,n,o,a,c){try{var i=e[a](c),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(n,o)}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,c,i=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(i.push(n.value),i.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(c=r.return(),Object(c)!==c))return}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return y(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var h=o().memo(function(e){var t=e.requiredRole,r=void 0===t?"subscriber":t,a=e.showPreview,c=void 0===a||a,i=e.disabledOpacity,l=void 0===i?.5:i,u=e.children,s=g((0,n.useState)(null),2),m=s[0],d=s[1],p=g((0,n.useState)(!0),2),v=p[0],y=p[1];(0,n.useEffect)(function(){h();var e=function(e){var t=e.detail.user;d(t)},t=function(){d(null)};return window.addEventListener("rwp-cct-auth-success",e),window.addEventListener("rwp-cct-auth-logout",t),function(){window.removeEventListener("rwp-cct-auth-success",e),window.removeEventListener("rwp-cct-auth-logout",t)}},[]);var h=function(){var e,t=(e=f().m(function e(){var t,r,n,o,a;return f().w(function(e){for(;;)switch(e.p=e.n){case 0:if(y(!0),e.p=1,!(t=localStorage.getItem("rwp_cct_token"))){e.n=6;break}return e.n=2,fetch("".concat(window.rwpCctGlobalAuth.apiUrl,"auth/verify"),{method:"GET",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}});case 2:if(!(r=e.v).ok){e.n=4;break}return e.n=3,r.json();case 3:n=e.v,d(n.user),e.n=5;break;case 4:localStorage.removeItem("rwp_cct_token"),d(null);case 5:e.n=7;break;case 6:null!==(o=window.rwpCctGlobalAuth)&&void 0!==o&&null!==(o=o.currentUser)&&void 0!==o&&o.isLoggedIn?d(window.rwpCctGlobalAuth.currentUser):d(null);case 7:e.n=9;break;case 8:e.p=8,a=e.v,console.error("Auth check failed:",a),d(null);case 9:return e.p=9,y(!1),e.f(9);case 10:return e.a(2)}},e,null,[[1,8,9,10]])}),function(){var t=this,r=arguments;return new Promise(function(n,o){var a=e.apply(t,r);function c(e){b(a,n,o,c,i,"next",e)}function i(e){b(a,n,o,c,i,"throw",e)}c(void 0)})});return function(){return t.apply(this,arguments)}}(),E=!!m,x=(null==m?void 0:m.role)||"guest";if(v)return o().createElement("div",{className:"flex items-center justify-center p-4"},o().createElement("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"}));var N=E&&w(x,r);return!N&&c?o().createElement("div",{className:"relative"},o().createElement("div",{style:{opacity:l},className:"pointer-events-none select-none"},u),o().createElement("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-900/75 rounded"},o().createElement("div",{className:"text-center p-4"},E?o().createElement(o().Fragment,null,o().createElement("p",{className:"text-gray-300 text-sm mb-2"},"Premium feature"),o().createElement("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-xs transition-colors",onClick:function(){console.log("Upgrade flow not implemented yet")}},"Upgrade")):o().createElement(o().Fragment,null,o().createElement("p",{className:"text-gray-300 text-sm mb-2"},"Log in to use this feature"),o().createElement("button",{onClick:function(){return function(){var e=new CustomEvent("rwp-cct-open-auth-modal",{detail:{formType:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"login"}});window.dispatchEvent(e)}("login")},className:"bg-gray-600 hover:bg-gray-700 text-white px-3 py-1 rounded text-xs transition-colors"},"Log In"))))):N?u:null}),w=function(e,t){var r={guest:0,subscriber:1,rwp_cct_premium:2,contributor:3,author:3,editor:4,administrator:5};return r[e]>=r[t]};h.displayName="ProtectedContent";const E=h,x=function(){return o().createElement("div",{className:"space-y-8 p-6 bg-gray-900 rounded-lg"},o().createElement("h2",{className:"text-2xl font-bold text-white mb-6"},"Protected Content Demo"),o().createElement("section",{className:"space-y-4"},o().createElement("h3",{className:"text-lg font-semibold text-gray-200"},"AuthGate Examples"),o().createElement("div",{className:"bg-gray-800 p-4 rounded"},o().createElement("h4",{className:"text-sm font-medium text-gray-300 mb-2"},"Subscriber Required"),o().createElement(p,{requiredRole:"subscriber"},o().createElement("button",{className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded"},"✓ Basic Feature Available"))),o().createElement("div",{className:"bg-gray-800 p-4 rounded"},o().createElement("h4",{className:"text-sm font-medium text-gray-300 mb-2"},"Premium Required"),o().createElement(p,{requiredRole:"rwp_cct_premium",upgradePrompt:"Upgrade to Premium to access advanced features"},o().createElement("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded"},"✓ Premium Feature Available"))),o().createElement("div",{className:"bg-gray-800 p-4 rounded"},o().createElement("h4",{className:"text-sm font-medium text-gray-300 mb-2"},"Custom Fallback Content"),o().createElement(p,{requiredRole:"subscriber",fallbackContent:o().createElement("div",{className:"text-center p-3 border border-yellow-500 rounded bg-yellow-900/20"},o().createElement("p",{className:"text-yellow-200 text-sm"},"Custom message: Please create an account to continue"))},o().createElement("div",{className:"bg-green-900/20 border border-green-500 p-3 rounded"},o().createElement("p",{className:"text-green-200"},"Protected content is visible!"))))),o().createElement("section",{className:"space-y-4"},o().createElement("h3",{className:"text-lg font-semibold text-gray-200"},"ProtectedContent Examples"),o().createElement("div",{className:"bg-gray-800 p-4 rounded"},o().createElement("h4",{className:"text-sm font-medium text-gray-300 mb-2"},"Preview Mode (Subscriber Required)"),o().createElement(E,{requiredRole:"subscriber",showPreview:!0},o().createElement("div",{className:"bg-blue-900/20 border border-blue-500 p-4 rounded"},o().createElement("h5",{className:"text-blue-200 font-medium"},"Sample Form"),o().createElement("div",{className:"mt-2 space-y-2"},o().createElement("input",{type:"text",placeholder:"Enter your name",className:"w-full px-3 py-2 bg-gray-700 text-white rounded"}),o().createElement("button",{className:"bg-blue-600 text-white px-4 py-2 rounded"},"Submit Form"))))),o().createElement("div",{className:"bg-gray-800 p-4 rounded"},o().createElement("h4",{className:"text-sm font-medium text-gray-300 mb-2"},"Preview Mode (Premium Required)"),o().createElement(E,{requiredRole:"rwp_cct_premium",showPreview:!0},o().createElement("div",{className:"bg-purple-900/20 border border-purple-500 p-4 rounded"},o().createElement("h5",{className:"text-purple-200 font-medium"},"Advanced Analytics"),o().createElement("div",{className:"mt-2 grid grid-cols-3 gap-4"},o().createElement("div",{className:"bg-gray-700 p-2 rounded text-center"},o().createElement("div",{className:"text-xl font-bold text-white"},"1,234"),o().createElement("div",{className:"text-xs text-gray-400"},"Views")),o().createElement("div",{className:"bg-gray-700 p-2 rounded text-center"},o().createElement("div",{className:"text-xl font-bold text-white"},"567"),o().createElement("div",{className:"text-xs text-gray-400"},"Clicks")),o().createElement("div",{className:"bg-gray-700 p-2 rounded text-center"},o().createElement("div",{className:"text-xl font-bold text-white"},"89%"),o().createElement("div",{className:"text-xs text-gray-400"},"Rate")))))),o().createElement("div",{className:"bg-gray-800 p-4 rounded"},o().createElement("h4",{className:"text-sm font-medium text-gray-300 mb-2"},"No Preview (Premium Required)"),o().createElement(E,{requiredRole:"rwp_cct_premium",showPreview:!1},o().createElement("div",{className:"bg-red-900/20 border border-red-500 p-4 rounded"},o().createElement("p",{className:"text-red-200"},"This content is completely hidden from non-premium users."))))),o().createElement("section",{className:"bg-gray-800 p-4 rounded"},o().createElement("h3",{className:"text-lg font-semibold text-gray-200 mb-2"},"Current Status"),o().createElement("div",{id:"rwp-cct-current-status",className:"text-gray-300"},"Loading authentication status...")))};function N(){var e=document.getElementById("rwp-cct-current-status");if(e){var t=localStorage.getItem("rwp_cct_jwt_token"),r=localStorage.getItem("rwp_cct_user_role")||"guest",n=!!t;e.innerHTML='\n      <div class="space-y-1">\n        <div><strong>Authenticated:</strong> '.concat(n?"Yes":"No","</div>\n        <div><strong>Role:</strong> ").concat(r,"</div>\n        <div><strong>Access Level:</strong> ").concat({guest:"None",subscriber:"Basic",rwp_cct_premium:"Premium",contributor:"Premium+",author:"Premium+",editor:"Premium+",administrator:"Premium+"}[r]||"Unknown","</div>\n      </div>\n    ")}}document.addEventListener("DOMContentLoaded",function(){window.RWP_CCT_ProtectedDemo={init:function(e){var t=document.getElementById(e);t&&((0,a.H)(t).render(o().createElement(x,null)),N(),document.addEventListener("rwp-cct-auth-success",N),document.addEventListener("rwp-cct-auth-logout",N))}}})})();