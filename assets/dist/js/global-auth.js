/*! For license information please see global-auth.js.LICENSE.txt */
(()=>{"use strict";var e={206:e=>{e.exports=ReactDOM},338:(e,t,r)=>{var n=r(206);t.H=n.createRoot,n.hydrateRoot}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);const n=React;var a=r.n(n),o=r(338),l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const c=(e,t)=>{const r=(0,n.forwardRef)(({color:r="currentColor",size:a=24,strokeWidth:o=2,absoluteStrokeWidth:c,children:i,...s},u)=>{return(0,n.createElement)("svg",{ref:u,...l,width:a,height:a,stroke:r,strokeWidth:c?24*Number(o)/Number(a):o,className:`lucide lucide-${m=e,m.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,...s},[...t.map(([e,t])=>(0,n.createElement)(e,t)),...(Array.isArray(i)?i:[i])||[]]);var m});return r.displayName=`${e}`,r},i=c("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),s=c("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),u=c("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),m=c("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),d=c("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);function f(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function o(r,n,a,o){var i=n&&n.prototype instanceof c?n:c,s=Object.create(i.prototype);return p(s,"_invoke",function(r,n,a){var o,c,i,s=0,u=a||[],m=!1,d={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,r){return o=t,c=0,i=e,d.n=r,l}};function f(r,n){for(c=r,i=n,t=0;!m&&s&&!a&&t<u.length;t++){var a,o=u[t],f=d.p,p=o[2];r>3?(a=p===n)&&(i=o[(c=o[4])?5:(c=3,3)],o[4]=o[5]=e):o[0]<=f&&((a=r<2&&f<o[1])?(c=0,d.v=n,d.n=o[1]):f<p&&(a=r<3||o[0]>n||n>p)&&(o[4]=r,o[5]=n,d.n=p,c=0))}if(a||r>1)return l;throw m=!0,n}return function(a,u,p){if(s>1)throw TypeError("Generator is already running");for(m&&1===u&&f(u,p),c=u,i=p;(t=c<2?e:i)||!m;){o||(c?c<3?(c>1&&(d.n=-1),f(c,i)):d.n=i:d.v=i);try{if(s=2,o){if(c||(a="next"),t=o[a]){if(!(t=t.call(o,i)))throw TypeError("iterator result is not an object");if(!t.done)return t;i=t.value,c<2&&(c=0)}else 1===c&&(t=o.return)&&t.call(o),c<2&&(i=TypeError("The iterator does not provide a '"+a+"' method"),c=1);o=e}else if((t=(m=d.n<0)?i:r.call(n,d))!==l)break}catch(t){o=e,c=1,i=t}finally{s=1}}return{value:t,done:m}}}(r,a,o),!0),s}var l={};function c(){}function i(){}function s(){}t=Object.getPrototypeOf;var u=[][n]?t(t([][n]())):(p(t={},n,function(){return this}),t),m=s.prototype=c.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,p(e,a,"GeneratorFunction")),e.prototype=Object.create(m),e}return i.prototype=s,p(m,"constructor",s),p(s,"constructor",i),i.displayName="GeneratorFunction",p(s,a,"GeneratorFunction"),p(m),p(m,a,"Generator"),p(m,n,function(){return this}),p(m,"toString",function(){return"[object Generator]"}),(f=function(){return{w:o,m:d}})()}function p(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}p=function(e,t,r,n){function o(t,r){p(e,t,function(e){return this._invoke(t,r,e)})}t?a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(o("next",0),o("throw",1),o("return",2))},p(e,t,r,n)}function b(e,t,r,n,a,o,l){try{var c=e[o](l),i=c.value}catch(e){return void r(e)}c.done?t(i):Promise.resolve(i).then(n,a)}function y(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function l(e){b(o,n,a,l,c,"next",e)}function c(e){b(o,n,a,l,c,"throw",e)}l(void 0)})}}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,l,c=[],i=!0,s=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;i=!1}else for(;!(i=(n=o.call(r)).done)&&(c.push(n.value),c.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{if(!i&&null!=r.return&&(l=r.return(),Object(l)!==l))return}finally{if(s)throw a}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return g(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const v=function(e){e.container;var t=h((0,n.useState)(null),2),r=t[0],o=t[1],l=h((0,n.useState)(!0),2),c=l[0],p=l[1];(0,n.useEffect)(function(){return b(),window.addEventListener("rwp-cct-auth-success",g),window.addEventListener("rwp-cct-auth-logout",v),function(){window.removeEventListener("rwp-cct-auth-success",g),window.removeEventListener("rwp-cct-auth-logout",v)}},[]);var b=function(){var e=y(f().m(function e(){var t,r,n,a,l;return f().w(function(e){for(;;)switch(e.p=e.n){case 0:if(p(!0),e.p=1,!(t=localStorage.getItem("rwp_cct_token"))){e.n=6;break}return e.n=2,fetch("".concat(window.rwpCctGlobalAuth.apiUrl,"auth/verify"),{method:"GET",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}});case 2:if(!(r=e.v).ok){e.n=4;break}return e.n=3,r.json();case 3:n=e.v,o(n.user),e.n=5;break;case 4:localStorage.removeItem("rwp_cct_token"),o(null);case 5:e.n=7;break;case 6:null!==(a=window.rwpCctGlobalAuth.currentUser)&&void 0!==a&&a.isLoggedIn?o(window.rwpCctGlobalAuth.currentUser):o(null);case 7:e.n=9;break;case 8:e.p=8,l=e.v,console.error("Auth check failed:",l),o(null);case 9:return e.p=9,p(!1),e.f(9);case 10:return e.a(2)}},e,null,[[1,8,9,10]])}));return function(){return e.apply(this,arguments)}}(),g=function(e){var t=e.detail,r=t.user,n=t.token;o(r),n&&localStorage.setItem("rwp_cct_token",n)},v=function(){var e=y(f().m(function e(){var t,r;return f().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,localStorage.removeItem("rwp_cct_token"),null===(t=window.rwpCctGlobalAuth.currentUser)||void 0===t||!t.isLoggedIn){e.n=1;break}return window.location.href=window.rwpCctGlobalAuth.logoutUrl,e.a(2);case 1:o(null),window.dispatchEvent(new CustomEvent("rwp-cct-auth-logout")),e.n=3;break;case 2:e.p=2,r=e.v,console.error("Logout failed:",r);case 3:return e.a(2)}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}(),w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"login";console.log("openModal called with formType:",e);var t=new CustomEvent("rwp-cct-open-auth-modal",{detail:{formType:e}});console.log("Dispatching event:",t),window.dispatchEvent(t)};return c?a().createElement("div",{className:"flex items-center text-gray-400"},a().createElement("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500"}),a().createElement("span",{className:"ml-2 text-sm"},"Loading...")):r?a().createElement("div",{className:"flex items-center gap-3 text-white"},a().createElement("div",{className:"flex items-center gap-2"},a().createElement("div",{className:"flex items-center gap-1"},a().createElement(i,{className:"w-4 h-4 text-gray-400"}),a().createElement("span",{className:"text-sm"},r.email)),r.role&&a().createElement("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(function(e){switch(e){case"administrator":case"editor":case"author":case"contributor":return"bg-gray-700 text-gray-200";case"rwp_cct_premium":return"bg-blue-600 text-white";default:return"bg-gray-600 text-white"}}(r.role))},a().createElement(s,{className:"w-3 h-3 inline mr-1"}),{subscriber:"Subscriber",rwp_cct_premium:"Premium",contributor:"Admin",author:"Admin",editor:"Admin",administrator:"Admin"}[r.role]||"User")),a().createElement("button",{onClick:v,className:"flex items-center gap-1 px-3 py-1 border border-gray-500 text-gray-300 hover:bg-gray-700 hover:border-gray-400 rounded-md text-sm transition-colors",title:"Logout"},a().createElement(u,{className:"w-4 h-4"}),a().createElement("span",{className:"hidden sm:inline"},"Logout"))):a().createElement("div",{className:"flex items-center gap-2"},a().createElement("button",{onClick:function(e){console.log("Login button clicked",e),w("login")},className:"flex items-center gap-1 px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white rounded-md text-sm transition-colors"},a().createElement(m,{className:"w-4 h-4"}),a().createElement("span",null,"Login")),a().createElement("button",{onClick:function(e){console.log("Register button clicked",e),w("register")},className:"flex items-center gap-1 px-3 py-1 bg-gray-700 hover:bg-gray-600 text-white rounded-md text-sm transition-colors"},a().createElement(d,{className:"w-4 h-4"}),a().createElement("span",null,"Register")))},w=c("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),x=c("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),E=c("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),k=c("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),N=c("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),S=c("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),C=c("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function A(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function o(r,n,a,o){var i=n&&n.prototype instanceof c?n:c,s=Object.create(i.prototype);return O(s,"_invoke",function(r,n,a){var o,c,i,s=0,u=a||[],m=!1,d={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,r){return o=t,c=0,i=e,d.n=r,l}};function f(r,n){for(c=r,i=n,t=0;!m&&s&&!a&&t<u.length;t++){var a,o=u[t],f=d.p,p=o[2];r>3?(a=p===n)&&(i=o[(c=o[4])?5:(c=3,3)],o[4]=o[5]=e):o[0]<=f&&((a=r<2&&f<o[1])?(c=0,d.v=n,d.n=o[1]):f<p&&(a=r<3||o[0]>n||n>p)&&(o[4]=r,o[5]=n,d.n=p,c=0))}if(a||r>1)return l;throw m=!0,n}return function(a,u,p){if(s>1)throw TypeError("Generator is already running");for(m&&1===u&&f(u,p),c=u,i=p;(t=c<2?e:i)||!m;){o||(c?c<3?(c>1&&(d.n=-1),f(c,i)):d.n=i:d.v=i);try{if(s=2,o){if(c||(a="next"),t=o[a]){if(!(t=t.call(o,i)))throw TypeError("iterator result is not an object");if(!t.done)return t;i=t.value,c<2&&(c=0)}else 1===c&&(t=o.return)&&t.call(o),c<2&&(i=TypeError("The iterator does not provide a '"+a+"' method"),c=1);o=e}else if((t=(m=d.n<0)?i:r.call(n,d))!==l)break}catch(t){o=e,c=1,i=t}finally{s=1}}return{value:t,done:m}}}(r,a,o),!0),s}var l={};function c(){}function i(){}function s(){}t=Object.getPrototypeOf;var u=[][n]?t(t([][n]())):(O(t={},n,function(){return this}),t),m=s.prototype=c.prototype=Object.create(u);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,O(e,a,"GeneratorFunction")),e.prototype=Object.create(m),e}return i.prototype=s,O(m,"constructor",s),O(s,"constructor",i),i.displayName="GeneratorFunction",O(s,a,"GeneratorFunction"),O(m),O(m,a,"Generator"),O(m,n,function(){return this}),O(m,"toString",function(){return"[object Generator]"}),(A=function(){return{w:o,m:d}})()}function O(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}O=function(e,t,r,n){function o(t,r){O(e,t,function(e){return this._invoke(t,r,e)})}t?a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(o("next",0),o("throw",1),o("return",2))},O(e,t,r,n)}function P(e,t,r,n,a,o,l){try{var c=e[o](l),i=c.value}catch(e){return void r(e)}c.done?t(i):Promise.resolve(i).then(n,a)}function L(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?L(Object(r),!0).forEach(function(t){M(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function M(e,t,r){return(t=function(e){var t=function(e){if("object"!=j(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=j(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==j(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,l,c=[],i=!0,s=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;i=!1}else for(;!(i=(n=o.call(r)).done)&&(c.push(n.value),c.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{if(!i&&null!=r.return&&(l=r.return(),Object(l)!==l))return}finally{if(s)throw a}}return c}}(e,t)||I(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){if(e){if("string"==typeof e)return G(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?G(e,t):void 0}}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var F=a().memo(function(e){var t=e.onSubmit,r=e.isLoading,o=(e.error,e.success,T((0,n.useState)({email:"",password:"",rememberMe:!1}),2)),l=o[0],c=o[1],s=T((0,n.useState)(!1),2),u=s[0],d=s[1];(0,n.useEffect)(function(){"true"===localStorage.getItem("rwp_cct_remember_me")&&c(function(e){return _(_({},e),{},{rememberMe:!0})})},[]);var f=(0,n.useCallback)(function(e){var t=e.target,r=t.name,n=t.value,a=t.type,o=t.checked,l="checkbox"===a?o:n;c(function(e){return _(_({},e),{},M({},r,l))})},[]),p=(0,n.useCallback)(function(e){e.preventDefault(),t(l,"login")},[l,t]);return a().createElement("div",null,a().createElement("h2",{className:"text-2xl font-bold text-white mb-2 text-center"},a().createElement(m,{className:"w-6 h-6 inline mr-2"}),"Welcome Back"),a().createElement("p",{className:"text-gray-400 text-center mb-6"},"Sign in to your account"),a().createElement("form",{onSubmit:p,className:"space-y-4"},a().createElement("div",null,a().createElement("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300 mb-2"},a().createElement(i,{className:"w-4 h-4 inline mr-2"}),"Email Address"),a().createElement("input",{key:"login-email",type:"email",id:"email",name:"email",value:l.email,onChange:f,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your email",required:!0,disabled:r})),a().createElement("div",null,a().createElement("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300 mb-2"},a().createElement(w,{className:"w-4 h-4 inline mr-2"}),"Password"),a().createElement("div",{className:"relative"},a().createElement("input",{key:"login-password",type:u?"text":"password",id:"password",name:"password",value:l.password,onChange:f,className:"w-full px-3 py-2 pr-10 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your password",required:!0,disabled:r}),a().createElement("button",{type:"button",onClick:function(){return d(!u)},className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white",disabled:r},u?a().createElement(x,{className:"w-5 h-5"}):a().createElement(E,{className:"w-5 h-5"})))),a().createElement("div",{className:"flex items-center justify-between"},a().createElement("label",{className:"flex items-center"},a().createElement("input",{type:"checkbox",name:"rememberMe",checked:l.rememberMe,onChange:f,className:"mr-2 rounded border-gray-600 bg-gray-700 text-blue-600"}),a().createElement("span",{className:"text-sm text-gray-400"},"Remember me"))),a().createElement("button",{type:"submit",disabled:r,className:"w-full px-4 py-2 rounded-md font-medium transition-colors ".concat(r?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white")},r?a().createElement("div",{className:"flex items-center justify-center"},a().createElement("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Signing In..."):"Sign In")))}),R=a().memo(function(e){var t,r=e.onSubmit,o=e.isLoading,l=(e.error,e.success,T((0,n.useState)({email:"",password:""}),2)),c=l[0],s=l[1],u=T((0,n.useState)(!1),2),m=u[0],f=u[1],p=T((0,n.useState)({score:0,level:"",feedback:[]}),2),b=p[0],y=p[1],h=(0,n.useRef)(null),g=(0,n.useCallback)(function(e){var t=e.target,r=t.name,n=t.value;s(function(e){return _(_({},e),{},M({},r,n))}),"password"===r&&(h.current&&clearTimeout(h.current),n?h.current=setTimeout(function(){v(n)},300):y({score:0,level:"",feedback:[]}))},[]),v=function(e){var t=k(e);y(t)},k=function(e){var t=0,r=[];return e.length>=8?t++:r.push("Use at least 8 characters"),/[a-z]/.test(e)?t++:r.push("Include lowercase letters"),/[A-Z]/.test(e)?t++:r.push("Include uppercase letters"),/[0-9]/.test(e)?t++:r.push("Include numbers"),/[^A-Za-z0-9]/.test(e)?t++:r.push("Include special characters"),{score:t,level:["Very Weak","Weak","Fair","Good","Strong"][Math.min(t,4)],feedback:r}},N=(0,n.useCallback)(function(e){e.preventDefault(),r(c,"register")},[c,r]);return(0,n.useEffect)(function(){return function(){h.current&&clearTimeout(h.current)}},[]),a().createElement("div",null,a().createElement("h2",{className:"text-2xl font-bold text-white mb-2 text-center"},a().createElement(d,{className:"w-6 h-6 inline mr-2"}),"Create Account"),a().createElement("p",{className:"text-gray-400 text-center mb-6"},"Start creating amazing content today"),a().createElement("form",{onSubmit:N,className:"space-y-4"},a().createElement("div",null,a().createElement("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300 mb-2"},a().createElement(i,{className:"w-4 h-4 inline mr-2"}),"Email Address"),a().createElement("input",{key:"register-email",type:"email",id:"email",name:"email",value:c.email,onChange:g,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your email",required:!0,disabled:o})),a().createElement("div",null,a().createElement("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300 mb-2"},a().createElement(w,{className:"w-4 h-4 inline mr-2"}),"Password"),a().createElement("div",{className:"relative"},a().createElement("input",{key:"register-password",type:m?"text":"password",id:"password",name:"password",value:c.password,onChange:g,className:"w-full px-3 py-2 pr-10 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Create a password (8+ characters)",required:!0,disabled:o}),a().createElement("button",{type:"button",onClick:function(){return f(!m)},className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white",disabled:o},m?a().createElement(x,{className:"w-5 h-5"}):a().createElement(E,{className:"w-5 h-5"}))),c.password&&a().createElement("div",{className:"mt-2"},a().createElement("div",{className:"flex gap-1 mb-2"},(t=Array(5),function(e){if(Array.isArray(e))return G(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||I(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).map(function(e,t){return a().createElement("div",{key:t,className:"h-1 flex-1 rounded ".concat(t<b.score?(r=b.score,0===r?"bg-gray-600":r<=1?"bg-red-500":r<=2?"bg-yellow-500":r<=3?"bg-blue-500":"bg-green-500"):"bg-gray-600")});var r})),a().createElement("div",{className:"flex justify-between items-center"},a().createElement("span",{className:"text-xs ".concat(b.score<=1?"text-red-400":b.score<=2?"text-yellow-400":b.score<=3?"text-blue-400":"text-green-400")},b.level),b.feedback.length>0&&a().createElement("span",{className:"text-xs text-gray-400"},b.feedback[0])))),a().createElement("div",{className:"text-xs text-gray-400"},"By creating an account, you agree to our"," ",a().createElement("a",{href:"#",className:"text-blue-400 hover:text-blue-300"},"Terms of Service")," and"," ",a().createElement("a",{href:"#",className:"text-blue-400 hover:text-blue-300"},"Privacy Policy")),a().createElement("button",{type:"submit",disabled:o,className:"w-full px-4 py-2 rounded-md font-medium transition-colors ".concat(o?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white")},o?a().createElement("div",{className:"flex items-center justify-center"},a().createElement("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating Account..."):"Create Account")))}),q=a().memo(function(e){var t=e.onSubmit,r=e.isLoading,o=(e.error,e.success,T((0,n.useState)(""),2)),l=o[0],c=o[1],s=(0,n.useCallback)(function(e){c(e.target.value)},[]),u=(0,n.useCallback)(function(e){e.preventDefault(),t({email:l},"reset")},[l,t]);return a().createElement("div",null,a().createElement("h2",{className:"text-2xl font-bold text-white mb-2 text-center"},a().createElement(k,{className:"w-6 h-6 inline mr-2"}),"Reset Password"),a().createElement("p",{className:"text-gray-400 text-center mb-6"},"Enter your email to receive reset instructions"),a().createElement("form",{onSubmit:u,className:"space-y-4"},a().createElement("div",null,a().createElement("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300 mb-2"},a().createElement(i,{className:"w-4 h-4 inline mr-2"}),"Email Address"),a().createElement("input",{key:"reset-email",type:"email",id:"email",name:"email",value:l,onChange:s,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your email",required:!0,disabled:r})),a().createElement("button",{type:"submit",disabled:r,className:"w-full px-4 py-2 rounded-md font-medium transition-colors ".concat(r?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white")},r?a().createElement("div",{className:"flex items-center justify-center"},a().createElement("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Sending Email..."):"Send Reset Email")))}),z=a().memo(function(e){var t=e.container;console.log("ðŸŸ¢ AuthModal render (should only happen on visibility/tab changes)");var r=T((0,n.useState)(!1),2),o=r[0],l=r[1],c=T((0,n.useState)("login"),2),i=c[0],s=c[1],u=T((0,n.useState)(!1),2),f=u[0],p=u[1],b=T((0,n.useState)(""),2),y=b[0],h=b[1],g=T((0,n.useState)(""),2),v=g[0],w=g[1];(0,n.useEffect)(function(){return window.addEventListener("rwp-cct-open-auth-modal",x),document.addEventListener("keydown",E),function(){window.removeEventListener("rwp-cct-open-auth-modal",x),document.removeEventListener("keydown",E)}},[]),(0,n.useEffect)(function(){t&&(o?(t.classList.remove("rwp-cct-modal-hidden"),t.classList.add("rwp-cct-modal-visible")):(t.classList.remove("rwp-cct-modal-visible"),t.classList.add("rwp-cct-modal-hidden")))},[o,t]);var x=(0,n.useCallback)(function(e){console.log("AuthModal: handleOpenModal called",e);var t=(e.detail||{}).formType;console.log("AuthModal: formType from event:",t),t&&s(t),l(!0),O(),console.log("AuthModal: Modal should now be visible, isVisible:",!0)},[]),E=(0,n.useCallback)(function(e){"Escape"===e.key&&o&&j()},[o]),j=(0,n.useCallback)(function(){l(!1),O()},[]),O=(0,n.useCallback)(function(){h(""),w(""),p(!1)},[]),L=(0,n.useCallback)(function(e,t){if(!e.email||!e.password)return h("Email and password are required"),!1;if(!e.email.includes("@"))return h("Please enter a valid email address"),!1;if("register"===t){if(e.password.length<8)return h("Password must be at least 8 characters long"),!1;if(!/[A-Za-z]/.test(e.password)||!/[0-9]/.test(e.password))return h("Password must contain at least one letter and one number"),!1}return!0},[]),_=(0,n.useCallback)(function(){var e,t=(e=A().m(function e(t,r){var n,a,o,l,c,i,s;return A().w(function(e){for(;;)switch(e.p=e.n){case 0:if(y&&h(""),"reset"===r||L(t,r)){e.n=1;break}return e.a(2);case 1:if(p(!0),h(""),e.p=2,"reset"!==r){e.n=5;break}return e.n=3,fetch("".concat(window.rwpCctGlobalAuth.apiUrl,"auth/reset"),{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":window.rwpCctGlobalAuth.nonce},body:JSON.stringify({email:t.email})});case 3:return n=e.v,e.n=4,n.json();case 4:a=e.v,n.ok&&a.success?w("Password reset instructions have been sent to your email."):h(a.message||"Failed to send reset email. Please try again."),e.n=8;break;case 5:return o="register"===r?"auth/register":"auth/login",l={email:t.email,password:t.password},e.n=6,fetch("".concat(window.rwpCctGlobalAuth.apiUrl).concat(o),{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":window.rwpCctGlobalAuth.nonce},body:JSON.stringify(l)});case 6:return c=e.v,e.n=7,c.json();case 7:i=e.v,c.ok&&i.success?(w("register"===r?"Account created successfully! Welcome!":"Welcome back!"),localStorage.setItem("rwp_cct_token",i.token),"login"===r&&t.rememberMe?localStorage.setItem("rwp_cct_remember_me","true"):localStorage.removeItem("rwp_cct_remember_me"),window.dispatchEvent(new CustomEvent("rwp-cct-auth-success",{detail:{user:i.user,token:i.token}})),setTimeout(function(){j()},1500)):h(i.message||"Authentication failed. Please try again.");case 8:e.n=10;break;case 9:e.p=9,s=e.v,console.error("Auth error:",s),h("Network error. Please check your connection and try again.");case 10:return e.p=10,p(!1),e.f(10);case 11:return e.a(2)}},e,null,[[2,9,10,11]])}),function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function l(e){P(o,n,a,l,c,"next",e)}function c(e){P(o,n,a,l,c,"throw",e)}l(void 0)})});return function(e,r){return t.apply(this,arguments)}}(),[y,L,j]),M=(0,n.useCallback)(function(){return a().createElement("div",{className:"flex space-x-1 bg-gray-800 p-1 rounded-lg mb-6"},a().createElement("button",{type:"button",onClick:function(){return s("login")},className:"flex-1 px-4 py-2 rounded-md text-sm font-medium transition-colors ".concat("login"===i?"bg-blue-600 text-white":"text-gray-400 hover:text-white hover:bg-gray-700")},a().createElement(m,{className:"w-4 h-4 inline mr-2"}),"Login"),a().createElement("button",{type:"button",onClick:function(){return s("register")},className:"flex-1 px-4 py-2 rounded-md text-sm font-medium transition-colors ".concat("register"===i?"bg-blue-600 text-white":"text-gray-400 hover:text-white hover:bg-gray-700")},a().createElement(d,{className:"w-4 h-4 inline mr-2"}),"Register"),a().createElement("button",{type:"button",onClick:function(){return s("reset")},className:"flex-1 px-4 py-2 rounded-md text-sm font-medium transition-colors ".concat("reset"===i?"bg-blue-600 text-white":"text-gray-400 hover:text-white hover:bg-gray-700")},a().createElement(k,{className:"w-4 h-4 inline mr-2"}),"Reset"))},[i]),I=(0,n.useCallback)(function(e){e.target===e.currentTarget&&j()},[j]),G=(0,n.useCallback)(function(){s("reset")},[]),z=(0,n.useCallback)(function(e){s(e)},[]);return o?a().createElement("div",{className:"absolute inset-0",onClick:I,style:{background:"rgba(0, 0, 0, 0.75)",display:"flex",alignItems:"center",justifyContent:"center"}},a().createElement("div",{className:"modal-content"},a().createElement("button",{onClick:j,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors",disabled:f},a().createElement(N,{className:"w-6 h-6"})),a().createElement(M,null),a().createElement("div",{className:"space-y-6"},"login"===i&&a().createElement(F,{onSubmit:_,isLoading:f,error:y,success:v}),"register"===i&&a().createElement(R,{onSubmit:_,isLoading:f,error:y,success:v}),"reset"===i&&a().createElement(q,{onSubmit:_,isLoading:f,error:y,success:v}),y&&a().createElement("div",{className:"flex items-center gap-2 p-3 bg-red-600/20 border border-red-600/30 rounded-md text-red-400"},a().createElement(S,{className:"w-5 h-5 flex-shrink-0"}),a().createElement("span",{className:"text-sm"},y)),v&&a().createElement("div",{className:"flex items-center gap-2 p-3 bg-green-600/20 border border-green-600/30 rounded-md text-green-400"},a().createElement(C,{className:"w-5 h-5 flex-shrink-0"}),a().createElement("span",{className:"text-sm"},v)),"login"===i&&a().createElement("div",{className:"text-center space-y-2"},a().createElement("button",{type:"button",onClick:G,className:"text-sm text-blue-400 hover:text-blue-300 block",disabled:f},"Forgot password?"),a().createElement("p",{className:"text-center text-gray-400 text-sm"},"Don't have an account?"," ",a().createElement("button",{type:"button",onClick:function(){return z("register")},className:"text-blue-400 hover:text-blue-300",disabled:f},"Sign up"))),"register"===i&&a().createElement("p",{className:"text-center text-gray-400 text-sm"},"Already have an account?"," ",a().createElement("button",{type:"button",onClick:function(){return z("login")},className:"text-blue-400 hover:text-blue-300",disabled:f},"Sign in")),"reset"===i&&a().createElement("div",{className:"text-center"},a().createElement("button",{type:"button",onClick:function(){return z("login")},className:"text-sm text-blue-400 hover:text-blue-300",disabled:f},"â† Back to login"))))):null});z.displayName="AuthModal",F.displayName="LoginForm",R.displayName="RegisterForm",q.displayName="ResetForm";const U=z;document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".rwp-cct-user-header");e.forEach(function(e){(0,o.H)(e).render(a().createElement(v,{container:e}))});var t=document.querySelectorAll(".rwp-cct-auth-modal");t.forEach(function(e){(0,o.H)(e).render(a().createElement(U,{container:e}))}),window.console&&console.log("RWP CCT Global Auth initialized:",{headerElements:e.length,modalElements:t.length})})})();